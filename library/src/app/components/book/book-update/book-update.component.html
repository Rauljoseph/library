<main>
    <section>
        <h2>Lista de libros</h2>
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Titulo</th>
                    <th>Autor</th>
                    <th>ISBN</th>
                    <th>Genero</th>
                    <th>Disponible</th>
                    <th>Ver libro</th>
                </tr>
            </thead>
            <tbody>
                @for(book of bookList; track book ){

                    <tr>
                        <td>{{book.id}}</td>
                        <td>{{book.titulo}}</td>
                        <td>{{book.autor}}</td>
                        <td>{{book.isbn}}</td>
                        <td>{{book.genero}}</td>
                        <td>{{ getDisponibilidadText(book.disponible)}}</td>
                        <td><button class="btn btn-primary" (click)="openForm(book)" >Editar</button></td>
                    </tr>
                }
            </tbody>
        </table>

        @if(showForm){
        <form class="form-control">
            <header>
                <h2>Editar Libro</h2>
            </header>
            <label for="title" class="label-control">Titulo</label>
            <input type="text" id="title" class="form-control"  [(ngModel)]="bookToEdit.titulo" name="newBook.titulo" >
            
            <label for="author" class="label-control">Autor</label>
            <input type="text" id="author" class="form-control" [(ngModel)]="bookToEdit.autor" name="bookToEdit.autor" >
    
            <label for="isbn" class="label-control">ISBN</label>
            <input type="text" id="isbn" class="form-control" [(ngModel)]="bookToEdit.isbn" name="bookToEdit.isbn" >
            
            <label for="genre" class="label-control">Genero</label>
            <input type="text" id="genre" class="form-control" [(ngModel)]="bookToEdit.genero" name="bookToEdit.genero" >
    
            <button class="btn btn-danger" (click)="closeForm()">Cancelar</button>
            <button class="btn btn-primary" (click)="validationBook()">Enviar</button>
        </form>
    
        }
        @if(failedMessage){
            <p class="alert alert-danger" role="alert">{{failedMessage}}</p>
        }

        @if(successMessage){
            <p class="alert alert-success" role="alert">{{successMessage}}</p>
        }

    </section>
</main>